@model UserProfileViewModel

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    @*     <style>
    body {
    background-color: #782223;
    }
    </style> *@
    <style>
        .bookcase {
            display: flex;
            flex-direction: row;
            margin: 15px;
            padding: 15px;
            background-color: #303030;
            border-radius: 30px;
        }

        .bookshelf {
            margin: 10px;
            padding: 10px;
            border-radius: 10px;
            background-color: dimgray;
        }

        .book {
            margin: 10px;
            padding: 10px;
            background-color: lightgray;
            border-radius: 10px;
        }

        h3 {
            color: firebrick;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background-color: whitesmoke;
            margin: 20% auto;
            padding: 20px;
            width: 50%;
            border-radius: 30px;
            position: relative;
            font-family: serif;        
        }

        .modal-content h2 {
            color: firebrick;
        }

        .close {
            color: dimgray;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header>
        <div class="name">Tassle on the Palm</div>

        <div class="tag-search"><input class="tag" type="text" placeholder="Поле вводу"></div>
        <div class="button-info"><button class="info"> </button></div>
    </header>

    <div class="back">
        <h1>User Profile</h1>
        <div>
            <p><strong>Name:</strong> @Model.Profile.Name</p>
            <p><strong>Tag:</strong> @Model.Profile.Tag</p>
            <p><strong>Description:</strong> @Model.Profile.Description</p>
            <p><strong>Genres Readed:</strong> @Model.Profile.GenresReaded</p>
        </div>
        <div>
            <a class="btn btn-primary" asp-area="" asp-controller="Profile" asp-action="EditProfile" asp-route-id="1">Редагувати профіль</a>

        </div>
    </div>

    <div class="bookcase">
        <div class="bookshelf" id="planning">
            <h2>Planning</h2>
            @if (Model.Books != null && Model.Books.Any())
            {
                @foreach (var book in Model.Books)
                {
                    @if (book.Status == "planning")
                    {
                        <div class="book" onclick="openModal('@book.Title', '@book.AuthorName', '@book.Picture', '@book.LanguageBook', '@book.Genre', '@book.Description')">
                            <img src=@book.Picture />
                            <h3>@book.Title</h3>
                            <h5>@book.AuthorName</h5>
                            <a asp-area=""
                               asp-controller="Book"
                               asp-action="Edit"
                               asp-route-id="@book.Id">Go edit this book, if u don't like it so much</a>
                        </div>
                    }
                }
            }
            else
            {
                <p>no books here :/</p>
            }
        </div>

        <div class="bookshelf" id="in_progress">
            <h2>In progress</h2>
            @if (Model.Books != null && Model.Books.Any())
            {
                @foreach (var book in Model.Books)
                {
                    @if (book.Status == "in_progress")
                    {
                        <div class="book" onclick="openModal('@book.Title', '@book.AuthorName', '@book.Picture', '@book.LanguageBook', '@book.Genre', '@book.Description')">
                            <img src=@book.Picture />
                            <h3>@book.Title</h3>
                            <h5>@book.AuthorName</h5>
                            <a asp-area=""
                               asp-controller="Book"
                               asp-action="Edit"
                               asp-route-id="@book.Id">Go edit this book, if u don't like it so much</a>
                        </div>
                    }
                }
            }
            else
            {
                <p>no books here :/</p>
            }
        </div>

        <div class="bookshelf" id="finished">
            <h2>Finished</h2>
            @if (Model.Books != null && Model.Books.Any())
            {
                @foreach (var book in Model.Books)
                {
                    @if (book.Status == "finished")
                    {
                        <div class="book" onclick="openModal('@book.Title', '@book.AuthorName', '@book.Picture', '@book.LanguageBook', '@book.Genre', '@book.Description')">
                            <img src=@book.Picture />
                            <h3>@book.Title</h3>
                            <h5>@book.AuthorName</h5>
                            <a asp-area=""
                               asp-controller="Book"
                               asp-action="Edit"
                               asp-route-id="@book.Id">Go edit this book, if u don't like it so much</a>
                        </div>
                    }
                }
            }
            else
            {
                <p>no books here, go read some >:(</p>
            }
        </div>
    </div>

    <div class="button-login"><a class="button-login" asp-area="" asp-controller="Book" asp-action="Add">Додати книгу (це ж додаток з книжками все-таки)</a></div>


    <!-- here goes pretty modal that will show you more information about specific book-->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="book-title"></h2>
            <img id="book-picture" alt="book's picture"/>
            <p id="book-author"></p>
            <p id="book-language"></p>
            <p id="book-genre"></p>
            <p id="book-description"></p>
        </div>
    </div>


    <footer>
        <div class="company">IHateThursday</div>
        <div class="line-1"></div>
    </footer>

    <script>

        var books = document.getElementsByClassName("book");

        let planningPlace = document.getElementById("planning");
        let progressPlace = document.getElementById("in_progress");
        let finishedPlace = document.getElementById("finished");

        for (book of books) {
            book.addEventListener('dragstart', function (e) {
                let selected = e.target;

                planningPlace.addEventListener('dragover', function (e) {
                    e.preventDefault();
                })
                planningPlace.addEventListener('drop', function (e) {
                    planningPlace.appendChild(selected);
                    selected = null;
                })

                progressPlace.addEventListener('dragover', function (e) {
                    e.preventDefault();
                })
                progressPlace.addEventListener('drop', function (e) {
                    progressPlace.appendChild(selected);
                    selected = null;
                })

                finishedPlace.addEventListener('dragover', function (e) {
                    e.preventDefault();
                })
                finishedPlace.addEventListener('drop', function (e) {
                    finishedPlace.appendChild(selected);
                    selected = null;
                })
            })
        }
        console.log(planningPlace);
        console.log(progressPlace);
        console.log(finishedPlace);
        console.log(books);

        var modal = document.getElementById("modal");
        var span = document.getElementsByClassName("close")[0];

        function openModal(title, author, picture, language, genre, description) {
            document.getElementById("book-title").innerHTML = title;
            document.getElementById("book-author").innerHTML = "Author: " + author;
            document.getElementById("book-picture").src = picture;
            document.getElementById("book-language").innerHTML = "Language: " + language;
            document.getElementById("book-genre").innerHTML = "Genre: " + genre;
            document.getElementById("book-description").innerHTML = "Description: " + description;
            modal.style.display = "block";
            console.log('some shit was clicked');
        }

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

    </script>
</body>
</html>






@*
<!DOCTYPE html>
<html>
<head>
    <title>User Profile</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/Web.styles.css" asp-append-version="true" />
</head>
<style>
    body {
        background-color: #782223;
    }
</style>
<body>
    <h1>User Profile</h1>
    <div>
        <p><strong>Name:</strong> @Model.Name</p>
        <p><strong>Tag:</strong> @Model.Tag</p>
        <p><strong>Description:</strong> @Model.Description</p>
        <p><strong>Genres Readed:</strong> @Model.GenresReaded</p>
    </div>
</body>
</html> *@